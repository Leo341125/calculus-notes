
\section{导数}
\label{sec:derivative}

\subsection{概念与几何意义}
\label{sec:concept-of-derivative}

我们先来看产生导数概念的物理学和几何学背景。

在运动物理学中，假如一个质点的位移随时间变化的方程是$s=s(t)$，现在考虑质点在$t=t_0$时刻的瞬间速度，我们用它在$t_0$附近很小的一段时间内的平均速度来逼近它，给时间一个增量$\Delta t$，则在时间段$[t_0,t_0+\Delta t]$内的平均速度是
\[ \frac{s(t_0+\Delta t)-s(t_0)}{\Delta t} \]
如果令$\Delta t$ 无限缩小，即让$\Delta t \to 0$，那么这个平均速度将无限逼近质点在$t=t_0$处的瞬时速度。

为了找到一条曲线在其上某点处的切线，假如恰当的选择坐标系后，曲线可以用一个连续函数$y=f(x)$来表示，点$P(x_0,f(x_0))$是这函数图象上一点，为了寻找函数图象在该点处的切线，可以从这图象上靠近点$P$的另一点$Q(x,f(x))$，并出割线$PQ$，其斜率是
\[ \frac{f(x)-f(x_0)}{x-x_0} \]
在$x \to x_0$时，割线将无限的与函数图象在$x_0$处的切线靠近，其极限位置就是该点处的切线，因此，上式的极限便是函数在$x_0$处的切线的斜率，设其为$K$，则曲线在$x_0$处的切线方程就是
\[ y-y_0 = K(x-x_0) \]

这两个例子都提出了一个问题，即对于给定函数$f(x)$，要求它在某点$x=x_0$处的下面这个表达式的极限值:
\[ \frac{f(x)-f(x_0)}{x-x_0} \]
或者写成另一种形式
\[ \frac{f(x_0+\Delta x)-f(x_0)}{\Delta x} \]
这个比值实际上就是函数值对自变量的变化率，这就引入了导数的概念。

\begin{definition}
  设函数$f(x)$在$x_0$的某邻域内有定义，如果极限
  \[ \lim_{x \to x_0} \frac{f(x)-f(x_0)}{x-x_0} \]
  存在，则称函数$f(x)$在$x_0$处\emph{可导}，此极限值称为$f(x)$在$x_0$处的\emph{导数}，并记为$f'(x_0)$，即
  \[ f'(x_0) = \lim_{x \to x_0} \frac{f(x)-f(x_0)}{x-x_0} \]
  如果前述极限不存在，则称函数在该点处不可导. 类似的，把极限过程分别替换为左极限和右极限，就得出\emph{左导数}$f_-'(x_0)$和\emph{右导数}$f_+'(x_0)$的概念，即
  \[ f_-'(x_0) = \lim_{x \to x_0^-} \frac{f(x)-f(x_0)}{x-x_0}, \ f_+'(x_0) = \lim_{x \to x_0} \frac{f(x)-f(x_0)}{x-x_0} \]
\end{definition}

显然，函数在某点处可导的充分必要条件是，该点既左可导又右可导，且左右导数相等。

容易看出，如果在某点可导，则必在该点处连续。

如果函数$f(x)$在$x_0$处可导，则在此处有
\[ \frac{\Delta y}{\Delta x} = f'(x_0)+\alpha \]
其中$\alpha$是一个无穷小，于是有
\[ \Delta y = f'(x_0)\Delta x + o(\Delta x) \]
即由一个$\Delta x$的一个线性式子加上一个$\Delta x$的高阶无穷小.这公式可以用于对函数进行估值，只要给定了$x_0$处的函数值以及该点处的导数，就可以近似的估计该点附近的函数值。

下面给出导函数的定义
\begin{definition}
  如果函数$f(x)$在某个区间上有定义，并且在该区间上处处可导（闭区间上的端点处只要单侧可导），则称函数在该区间上可导，而由自变量映射导数值构成一个新的函数$f'(x)$，称为函数$f(x)$的\emph{导函数}.
\end{definition}

\begin{example}
  常数函数$f(x)=C$，由于函数的增量始终为零，所以它在任意点处都可导，且导数为零。
\end{example}

\begin{example}
  设$n \in \mathbb{Z}$，我们来求幂函数$f(x)=x^n(n \in N_+)$在$x_0$处的导数，因为
  \[ \frac{x^n-x_0^n}{x-x_0} = x^{n-1}+x^{n-2}x_0+\cdots+xx_0^{n-2}+x_0^{n-1} \]
  上式右端在$x \to x_0$时显然以$nx_0^{n-1}$为极限，于是该函数的导函数是
  \[ (x^n)' = nx^{n-1} \]
\end{example}

\begin{example}
  函数$f(x)=\frac{1}{x}$在$x_0 \neq 0$处的导数，有
  \[ \frac{\frac{1}{x}-\frac{1}{x_0}}{x-x_0} = - \frac{1}{xx_0} \]
  令$x \to x_0$，便知函数在$x_0$处的导数值是$-\frac{1}{x_0^2}$，于是有
  \[ \left( \frac{1}{x} \right)' = - \frac{1}{x^2} \]
\end{example}

\begin{example}
  函数$f(x)=\sqrt{x}$在$x_0$处，有
  \[ \frac{\sqrt{x}-\sqrt{x_0}}{x-x_0} = \frac{1}{\sqrt{x}+\sqrt{x_0}} \]
  因此，函数在$x_0$处的导数值是$\frac{1}{2 \sqrt{x_0}}$，即它的导函数是
  \[ \left( \sqrt{x} \right) ' = \frac{1}{2 \sqrt{x}} \]
\end{example}

\begin{example}
 我们在 \autoref{example:limit-of-sinx-sinx0-over-x-x0} 中已经证明了下面两个极限:
  \[ \lim_{x \to x_0} \frac{\sin{x}-\sin{x_0}}{x-x_0} = \cos{x_0}, \  
   \lim_{x \to x_0} \frac{\cos{x}-\cos{x_0}}{x-x_0} = -\sin{x_0} \]
 于是有
 \[ (\sin{x})' = \cos{x}, \  (\cos{x})' = - \sin{x} \]
\end{example}

\begin{example}
  现在来求指数函数$f(x)=a^x(a>0,a\neq 1)$在任意点$x_0$处的导数。
  利用在 \autoref{example:e-power-x-1-equalitant-to-x} 中求得的极限，有
  \[ \lim_{x \to x_0} \frac{a^{x}-a^{x_0}}{x-x_0} = \lim_{x \to x_0} a^{x_0} \frac{a^{x-x_0}-1}{x-x_0} = \lim_{h \to 0} a^{x_0} \frac{a^h-1}{h} = a^{x_0} \ln{a} \]
  于是有
  \[ (a^x)' = a^x \ln{a} \]
  特别的有 $(e^x)'=e^x$，这就是说，以$\mathrm{e}$为底的指数函数的导函数就是它自己，这非常重要且有趣.
\end{example}

\begin{example}
  我们在\autoref{example:function-with-continuous-at-single-point}中利用狄利克雷函数构造了仅在一个点处连续的函数例子:$f(x)=xD(x)$，我们指出，这个函数虽然在$x=0$处连续，但在此处却不可导，因为当$x$分别取有理数值和无理数值并趋于零时，变化率
  \[ \frac{f(x)-f(0)}{x-0} = \frac{f(x)}{x} = D(x) \]
  分别趋于两个不同的极限值，所以不可导，但是如果我们把函数中的无穷小因子升次，变成
  \[ f(x)=x^2D(x) \]
  此时有
  \[ \lim_{x \to 0} \frac{f(x)-f(0)}{x-0} = \lim_{x \to 0} xD(x) = 0 \]
  这表明这个新构造的函数在$x=0$处可导，且导数为零，然而它在除$x=0$之外的其它点处均不连续，所以也就不可导，于是它成为了仅在一个点处连续且可导的函数例子。
\end{example}

\subsection{求导法则}
\label{sec:rule-of-derivative}

\begin{theorem}
  设函数$f(x)$和$g(x)$在$x_0$的某个邻域内有定义且在$x_0$处可导，则函数$u(x)=f(x)+g(x)$和$v(x)=f(x)-g(x)$在$x_0$处也可导，并且
  \[ u'(x_0)=f'(x_0)+g'(x_0), \  v'(x)=f'(x_0)-g'(x_0) \]
\end{theorem}

只要注意到$\Delta u=\Delta f+\Delta g$以及$\Delta v=\Delta f+ \Delta g$即可得知结论成立。

\begin{theorem}
  设函数$f(x)$和$g(x)$在$x_0$的某个邻域内有定义并且在$x_0$处可导，则函数$u(x)=f(x)g(x)$在$x_0$处也可导，并且
  \[ u'(x_0)=f'(x_0)g(x_0)+f(x_0)g'(x_0) \]
\end{theorem}

\begin{proof}[证明]
  因为
  \begin{eqnarray*}
    u(x)-u(x_0) & = & f(x)g(x)-f(x_0)g(x_0) \\
                & = & [f(x)-f(x_0)]g(x)+f(x_0)[g(x)-g(x_0)]
  \end{eqnarray*}
  于是
  \[ \frac{u(x)-u(x_0)}{x-x_0} = \frac{f(x)-f(x_0)}{x-x_0}g(x)+f(x_0)\frac{g(x)-g(x_0)}{x-x_0} \]
  两边令$x \to x_0$便得结论.
\end{proof}

利用数学归纳法，可以把这结论推广到多个函数相乘的情况:
\begin{theorem}
  设有若干个函数$f_i(x)(i=1,2,\ldots,n)$都在$x_0$的某个邻域内有定义，又若它们都在$x_0$处可导，则函数$P(x)=\prod\limits_{i=1}^nf_i(x)$在$x_0$处也可导，并且
  \[ P'(x_0) = \prod_{i=1}^nf_i(x_0) \cdot \sum_{i=1}^n \frac{f_i'(x_0)}{f_i(x_0)} \]
\end{theorem}

\begin{theorem}
  设函数$f(x)$在$x_0$的某邻域内有定义且$f(x) \neq 0$，并且在$x_0$处可导，则函数$u(x)=\dfrac{1}{f(x)}$在$x_0$处也可导，且有
  \[ u'(x) = -\frac{f'(x_0)}{f^2(x_0)} \]
\end{theorem}

\begin{proof}[证明]
  因为
  \begin{eqnarray*}
    \frac{u(x)-u(x_0)}{x-x_0} & = & \frac{\frac{1}{f(x)}-\frac{1}{f(x_0)}}{x-x_0} \\
    & = & - \frac{1}{f(x)f(x_0)} \cdot \frac{f(x)-f(x_0)}{x-x_0}
  \end{eqnarray*}
  令$x \to x_0$取极限即得结论.
\end{proof}

由以上两个定理，只要把两个函数的商函数$\dfrac{f(x)}{g(x)}$写成$f(x)\cdot \dfrac{1}{g(x)}$，就得到
\begin{theorem}
  设函数$f(x)$和$g(x)$都在$x_0$的某个邻域内有定义且$g(x)\neq 0$，如果两者都在$x_0$处可导，则$u(x)=\dfrac{f(x)}{g(x)}$在$x_0$处可导，并且有
  \[ u'(x_0) = \frac{f'(x_0)g(x_0)-f(x_0)g'(x_0)}{g^2(x_0)} \]
\end{theorem}

\begin{example}
  考察多项式函数
  \[ f(x) = a_nx^n+a_{n-1}x^{n-1}+\cdots+a_1x+a_0 \]
  现在容易得知它的导函数是
  \[ f'(x) = na_nx^{n-1}+(n-1)a_{n-1}x^{n-2}+\cdots+2a_2x+a_1 \]
  显然，$n$次多项式函数的导函数是$n-1$次多项式函数。
\end{example}

\begin{example}
  由商的求导法则，可得出正切函数的导函数
  \begin{eqnarray*}
    \tan'{x} & = & \left( \frac{\sin{x}}{\cos{x}} \right)'  \\
             & = & \frac{(\sin{x})'\cos{x}-\sin{x}(\cos{x})'}{\cos^2{x}} \\
             & = & \frac{\cos^2{x}+\sin^2{x}}{\cos^2{x}} \\
    & = & \frac{1}{\cos^2{x}} = \sec^2{x}
  \end{eqnarray*}

  以及
  \[ (\sec{x})' = \frac{\sin{x}}{\cos^2{x}}, \  (\csc{x})'=-\frac{\cos{x}}{\sin^2{x}} \]
\end{example}


\subsection{反函数的导数}
\label{sec:derivative-of-revert-function}

\begin{theorem}
  如果函数$f(x)$在$x_0$的某个邻域上严格单调，且在$x_0$处存在非零的导数，则其反函数$x=\varphi(y)$在$y_0=f(x_0)$处亦可导，且导数值
  \[ \varphi '(y_0) = \frac{1}{f'(x_0)} \]
\end{theorem}

\begin{proof}[证明]
  由于严格单调且连续，所以$x \to x_0$等价于$y \to y_0$，因此有
  \[ \lim_{y \to y_0} \frac{\varphi(y)-\varphi(y_0)}{y-y_0} = \lim_{x \to x_0} \frac{x-x_0}{f(x)-f(x_0)} = \frac{1}{f'(x_0)} \]
\end{proof}

\begin{example}
  由指数函数的导数，可以得到对数函数的导数，函数$y=a^x(a>0, a \neq 1)$的导函数是$y'=a^x \ln{a}$，于是它的反函数$x=\log_a y$的导函数就是$x'=\frac{1}{a^x \ln{a}}=\frac{\log_a \mathrm{e}}{y}$，特别的是 $(\ln{x})'=\frac{1}{x}$.
\end{example}

\begin{example}
  来求一下反三角函数的导数，因为$(\sin{x})'=\cos{x}$，所以
  \[ (\arcsin{y})'=\frac{1}{(\sin{x})'} = \frac{1}{\cos{x}} = \frac{1}{\sqrt{1-y^2}} \]
  注意反正弦的取值范围是$(-\frac{\pi}{2},\frac{\pi}{2})$，所以这里余弦是正值，这就是反正弦函数的导数，同样可求得反余弦导函数
  \[ (\arccos{y})' = - \frac{1}{\sqrt{1-y^2}} \]
  对于反正切函数，则有
  \[ (\arctan{y})' = \frac{1}{(\tan{x})'} = \cos^2{x} = \frac{1}{1+\tan^2{x}} = \frac{1}{1+y^2} \]
\end{example}

\subsection{复合函数的导数}
\label{sec:derivative-of-embed-function}

\begin{theorem}
  设函数$u=\varphi(x)$在$x_0$处可导，而函数$y=f(u)$在$u_0=\varphi(x)$处亦可导，且$y=f(u)$在$u_0$的某空心邻域内函数值恒不与$f(u_0)$相同，则复合函数$y=f(\varphi(x))$在$x_0$处可导，且导数值为$f'(u_0)\varphi '(x_0)$.
\end{theorem}

\begin{proof}[证明]
  由$x=\varphi(x)$在$x_0$处的连续性，当$x \to x_0$时亦必有$u \to u_0$，于是在等式
  \[ \frac{f(\varphi(x))-f(\varphi(x_0))}{x-x_0} = \frac{f(\varphi(x))-f(\varphi(x_0))}{\varphi(x)-\varphi(x_0)} \cdot \frac{\varphi(x)-\varphi(x_0)}{x-x_0} = \frac{f(u)-f(u_0)}{u-u_0} \cdot \frac{\varphi(x)-\varphi(x_0)}{x-x_0} \]
  两边令$x \to x_0$便得结论.
\end{proof}

根据定理，函数$y=f(\varphi(x))$的导函数是$y'=f'(\varphi(x))\varphi '(x)$.

\begin{example}
  对于双曲函数的导函数，将双曲余弦$y=\cos{x}=\frac{e^x+e^{-x}}{2}$看成$\varphi(x)=e^x$以及$f(x)=\frac{u+\frac{1}{u}}{2}$的复合，就有
  \[ (\cosh{x})' = \left( \frac{\mathrm{e}^x+\mathrm{e}^{-x}}{2} \right)' = \frac{\mathrm{e}^x-\mathrm{e}^{-x}}{2} = \sinh{x} \]
  同样有
  \[ (\sinh{x})' = \cosh{x} \]
  这跟三角函数的求导函数非常类似，以后我们还会看到，双曲函数在很多方面都跟三角函数有类似的性质。
\end{example}

\begin{example}
  我们也可以把余弦函数$y=\cos{x}$写成$y=\sin{\left( x+\frac{\pi}{2} \right)}$，从而将它看成是由$y=\sin{u}$以及$u=x+\frac{\pi}{2}$复合而成，于是便得
  \[ (\cos{x})' = (\sin{u})' \cdot u'(x) = \cos{u} = \cos{\left( x+\frac{\pi}{2} \right)} = - \sin{x} \]
\end{example}

\subsection{求导公式表}
\label{sec:table-of-derivative-formule}

\subsection{参变量函数的导数}
\label{sec:derivative-of-parametered-function}

\subsection{高阶导数}
\label{sec:high-level-derivative}

\subsection{微分与高阶微分}
\label{sec:difference-and-high-level-difference}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../calculus-note"
%%% End:
